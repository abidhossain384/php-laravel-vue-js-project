<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 11 Project</title>
</head>
<body>
    <h1>Open Console to See Output</h1>


    <script>
        // debugger;

        let students = [];
        let idCounter =1;

        // Print Message
        function showMessage() {
            let printed = false;

            do {
                console.log("Welcome To Students Grade Management System");
                printed = true;
            } while(!printed)
        }

        // Add Student
        function addStudent(name, marks) {
            if(marks >= 80 && marks <= 100) {
                grade = "A+"
            } else if(marks >=70 && marks < 80) {
                grade = "A"
            } else if(marks >=60 && marks < 70) {
                grade = "B"
            } else if(marks >=50 && marks < 60) {
                grade = "C"
            } else if(marks >=40 && marks < 50) {
                grade = "D"
            } else {
                grade = "F"
            }

            let student = {
                id: idCounter++,
                name: name,
                marks: marks,
                grade: grade
            }

            students.push(student);
            return student;
        }

        // Show All Students
        function showStudents() {
            console.log("============= Students List =============");
            for(let i=0; i<students.length; i++) {
                console.log(`${students[i].id}, ${students[i].name}, ${students[i].marks}, ${students[i].grade}`);
            }
        }

        // Find Student
        function findStudent(id) {
            let result;

            switch(true) {
                case students.length === 0 :
                    result = "No Student Found";
                    break;
                default : 
                    result = students.find(s=>s.id === id) || "Student Not Found";
            }

            return result;
        }

        // Total Marks
        function totalMarks() {
            let i = 0;
            let total = 0;
            while(i <students.length) {
                total += students[i].marks;
                i++;
            }

            return total;
        }

        // Student Details
        function showStudentDetails(student) {
            console.log("============= Student Details =============");

            for(let key in student) {
                console.log(`${key} : ${student[key]}`);
            }
        }

        // Delete Student
        let deleteStudent = function(id) {
            let index = students.findIndex(s=>s.id === id);

            if(index !== -1) {
                students.splice(index, 1);
                return "Student Deleted Successfully";
            } else {
                return "Student Not Found";
            }
        }

        // Average Marks
        let averageMarks = () =>{
            if(students.length === 0) {
                return 0;
            } else {
                return totalMarks() / students.length;
            }
        }

        // Show all students except F grade
        function showPassedStudents() {
            console.log("============= Passed Students =============");
            for (let i = 0; i < students.length; i++) {
                if (students[i].grade !== "F") {
                    console.log(`${students[i].id}, ${students[i].name}, ${students[i].marks}, ${students[i].grade}`);
                }
            }
        }

        // Find student with highest mark
        function findTopStudent() {
            if (students.length === 0) {
                return "No students available";
            }

            let topStudent = students[0]; // assume first student is top initially

            for (let i = 1; i < students.length; i++) {
                if (students[i].marks > topStudent.marks) {
                    topStudent = students[i];
                }
            }

            return topStudent;
        }

        // Welcome Message
        showMessage();

        // Create Students
        addStudent("Ariful", 23);
        addStudent("Mokbul", 98);
        addStudent("Kuddus", 32);
        addStudent("Saiful", 40);
        addStudent("Ismail", 54);

        // Show All Students
        showStudents();

        // Total Marks Obtained by Students
        console.log("Total Marks: ", totalMarks());

        // Find Student with ID
        console.log(findStudent(2));

        // Show Student Details
        showStudentDetails(students[1]);

        // Delete  Student With ID
        console.log(deleteStudent(1));

        // Showing Students After Deleting One Student
        showStudents();

        // Total Marks Obtained by Students After Deleting One Student
        console.log("Total Marks: ", totalMarks());

        // Calculting Average Marks
        console.log("Average Mark: ", averageMarks());

        // Showing Only Passed Students
        showPassedStudents();

        // Show Student with Highest Mark
        console.log("Top Student:", findTopStudent());

    </script>
</body>
</html>